# vnStat Telegram Traffic Reporter

一个基于 `vnStat` 的轻量级 Linux 服务器流量监控与 Telegram 自动日报脚本。支持自定义流量限额、结算日重置，并提供排版精美的单行进度条报告。

## 🌟 功能特点

- **精美排版**：针对 Telegram 手机端优化，各项参数对齐显示，拒绝乱码。
- **进度可视化**：10 格彩色进度条（🟩🟧🟥），实时掌握流量消耗百分比。
- **智能统计**：
  - 支持自定义每月结算日（自动处理月末日期）。
  - 自动计算本月累计流量与剩余可用流量。
  - 自动获取服务器公网 IPv4 地址。
- **零负担运行**：基于系统 Cron 定时任务，凌晨自动推送，不占用后台进程。
- **一键管理**：交互式菜单设计，支持安装、更新、测试与卸载。

## 📸 效果预览

> **📊 流量日报 | 我的服务器**
> 
> `🏠 地址：` `23.106.153.67`
> `📥 下载：` `2.54 GB`
> `📤 上传：` `1.86 GB`
> `🈴 合计：` `4.41 GB`
> `📅 周期：` `2025-12-11 ~ 2026-01-10`
> 
> `📈 累计：` `79.92 GB / 1000 GB`
> `🔂 剩余：` `920.08 GB`
> `🎯 进度：` 🟩⬜⬜⬜⬜⬜⬜⬜⬜⬜ `7%`
> 
> 🕙 `2026-01-05 01:00`

## 🚀 快速安装

在你的 Linux 服务器上执行以下命令即可进入交互式安装：

```bash
bash -c "$(curl -L https://raw.githubusercontent.com/SumMoonYou/vps_traffic/refs/heads/main/vps_vnstat_telegram.sh)" @ install

🛠️ 配置说明
首次安装时，脚本会要求输入以下信息：
| 配置项 | 说明 |
|---|---|
| 主机别名 | 显示在日报标题中的名称（如：搬瓦工-DC3） |
| TG Bot Token | 通过 @BotFather 申请到的机器人令牌 |
| TG Chat ID | 接收消息的用户 ID 或频道 ID（可通过 @userinfobot 获取） |
| 每月重置日 | 流量重置的日期（1-31），如设置 11 号，统计周期即为上月 11 号至本月 10 号 |
| 流量限额 | 你的月流量上限（单位：GB） |
📅 定时推送
脚本安装完成后，会自动在 Crontab 中添加一条记录：
 * 默认推送时间：每天凌晨 01:00
 * 手动修改：可以使用 crontab -e 修改推送时间。
🗑️ 卸载脚本
运行 ./vnstat_tg.sh 后选择菜单中的 3. 卸载 选项，即可自动清理 Cron 任务、配置文件以及推送脚本，无残留。
📋 依赖要求
 * 系统：Debian / Ubuntu / CentOS (已做兼容处理)
 * 软件：vnstat, curl, bc, cron

---
